<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>akvo.notifications.store-mem documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Akvo-notifications 0.3.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>akvo</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>notifications</span></div></div></li><li class="depth-3 branch"><a href="akvo.notifications.drafts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>drafts</span></div></a></li><li class="depth-3 branch"><a href="akvo.notifications.events.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>events</span></div></a></li><li class="depth-3 branch"><a href="akvo.notifications.main.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>main</span></div></a></li><li class="depth-3 branch current"><a href="akvo.notifications.store-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store-mem</span></div></a></li><li class="depth-3 branch"><a href="akvo.notifications.systems.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>systems</span></div></a></li><li class="depth-3 branch"><a href="akvo.notifications.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-3"><a href="akvo.notifications.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-1"><a href="user.html"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>user</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="akvo.notifications.store-mem.html#var--.3EMemStorage"><div class="inner"><span>-&gt;MemStorage</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-add-notification"><div class="inner"><span>add-notification</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-coll-nth"><div class="inner"><span>coll-nth</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-create-event"><div class="inner"><span>create-event</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-end-subscription"><div class="inner"><span>end-subscription</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-events-coll"><div class="inner"><span>events-coll</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-events-nth"><div class="inner"><span>events-nth</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-get-subscribers"><div class="inner"><span>get-subscribers</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-grab-user"><div class="inner"><span>grab-user</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-map-.3EMemStorage"><div class="inner"><span>map-&gt;MemStorage</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-new-user"><div class="inner"><span>new-user</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-project-donation"><div class="inner"><span>project-donation</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-service.21"><div class="inner"><span>service!</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-services-coll"><div class="inner"><span>services-coll</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-services-nth"><div class="inner"><span>services-nth</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-start-subscription"><div class="inner"><span>start-subscription</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-store"><div class="inner"><span>store</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-store-data"><div class="inner"><span>store-data</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-str-map-.3Eid-map"><div class="inner"><span>str-map-&gt;id-map</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-subscribe-item-to-user"><div class="inner"><span>subscribe-item-to-user</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-subscribe-user-to-item"><div class="inner"><span>subscribe-user-to-item</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-tuple-vec-.3Eemail-tuple"><div class="inner"><span>tuple-vec-&gt;email-tuple</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-tuple-vec-.3Eid-tuple"><div class="inner"><span>tuple-vec-&gt;id-tuple</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-tuple-vec-.3Ekeyword-tuple"><div class="inner"><span>tuple-vec-&gt;keyword-tuple</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-unsubscribe-item-from-user"><div class="inner"><span>unsubscribe-item-from-user</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-unsubscribe-user-from-item"><div class="inner"><span>unsubscribe-user-from-item</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-user.21"><div class="inner"><span>user!</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-user-notifed"><div class="inner"><span>user-notifed</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-users-coll"><div class="inner"><span>users-coll</span></div></a></li><li class="depth-1"><a href="akvo.notifications.store-mem.html#var-users-nth"><div class="inner"><span>users-nth</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">akvo.notifications.store-mem</h2><div class="doc"><pre class="plaintext">Memory storage
</pre></div><div class="public anchor" id="var--.3EMemStorage"><h3>-&gt;MemStorage</h3><div class="usage"><code>(-&gt;MemStorage)</code></div><div class="doc"><pre class="plaintext">Positional factory function for class akvo.notifications.store_mem.MemStorage.
</pre></div></div><div class="public anchor" id="var-add-notification"><h3>add-notification</h3><div class="usage"><code>(add-notification users email event-id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-coll-nth"><h3>coll-nth</h3><div class="usage"><code>(coll-nth coll id)</code></div><div class="doc"><pre class="plaintext">From a map with id
</pre></div></div><div class="public anchor" id="var-create-event"><h3>create-event</h3><div class="usage"><code>(create-event {:keys [:events]} event)</code></div><div class="doc"><pre class="plaintext">
</pre></div></div><div class="public anchor" id="var-end-subscription"><h3>end-subscription</h3><div class="usage"><code>(end-subscription {:keys [:services :users], :as data} service-name item uid email)</code></div><div class="doc"><pre class="plaintext">Handle the end of a subscription
</pre></div></div><div class="public anchor" id="var-events-coll"><h3>events-coll</h3><div class="usage"><code>(events-coll {:keys [:events], :as data})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-events-nth"><h3>events-nth</h3><div class="usage"><code>(events-nth {:keys [:events], :as data} id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-get-subscribers"><h3>get-subscribers</h3><div class="usage"><code>(get-subscribers data service-name item)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-grab-user"><h3>grab-user</h3><div class="usage"><code>(grab-user users service-name suid email name)</code></div><div class="doc"><pre class="plaintext">Either return with existing user or create and return new user
</pre></div></div><div class="public anchor" id="var-map-.3EMemStorage"><h3>map-&gt;MemStorage</h3><div class="usage"><code>(map-&gt;MemStorage m__5869__auto__)</code></div><div class="doc"><pre class="plaintext">Factory function for class akvo.notifications.store_mem.MemStorage, taking a map of keywords to field values.
</pre></div></div><div class="public anchor" id="var-new-user"><h3>new-user</h3><div class="usage"><code>(new-user users service-name suid email name)</code></div><div class="doc"><pre class="plaintext">Returns a new user
</pre></div></div><div class="public anchor" id="var-project-donation"><h3>project-donation</h3><div class="usage"><code>(project-donation data service-name item amount currency event-id email)</code></div><div class="doc"><pre class="plaintext">When a RSR project recieves a donation
</pre></div></div><div class="public anchor" id="var-service.21"><h3>service!</h3><div class="usage"><code>(service! {:keys [:services], :as data} service-name)</code></div><div class="doc"><pre class="plaintext">Provided with proper arguments will return new or existing service
</pre></div></div><div class="public anchor" id="var-services-coll"><h3>services-coll</h3><div class="usage"><code>(services-coll data)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-services-nth"><h3>services-nth</h3><div class="usage"><code>(services-nth {:keys [:services], :as data} id)</code></div><div class="doc"><pre class="plaintext">
</pre></div></div><div class="public anchor" id="var-start-subscription"><h3>start-subscription</h3><div class="usage"><code>(start-subscription {:keys [:services :users], :as data} service-name item uid email name)</code></div><div class="doc"><pre class="plaintext">Handle the start of a subscription
</pre></div></div><div class="public anchor" id="var-store"><h3>store</h3><div class="usage"><code>(store backend)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-store-data"><h3>store-data</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-str-map-.3Eid-map"><h3>str-map-&gt;id-map</h3><div class="usage"><code>(str-map-&gt;id-map coll)</code></div><div class="doc"><pre class="plaintext">
</pre></div></div><div class="public anchor" id="var-subscribe-item-to-user"><h3>subscribe-item-to-user</h3><div class="usage"><code>(subscribe-item-to-user users service-name item email)</code></div><div class="doc"><pre class="plaintext">Subscribe item to user
</pre></div></div><div class="public anchor" id="var-subscribe-user-to-item"><h3>subscribe-user-to-item</h3><div class="usage"><code>(subscribe-user-to-item services service-name item uid)</code></div><div class="doc"><pre class="plaintext">Subscribe user to item
</pre></div></div><div class="public anchor" id="var-tuple-vec-.3Eemail-tuple"><h3>tuple-vec-&gt;email-tuple</h3><div class="usage"><code>(tuple-vec-&gt;email-tuple tuple-vec)</code></div><div class="doc"><pre class="plaintext">&quot;Vector of truples to tuples of id&apos;s&quot;; transforms a vector of
tuples into a map with the tuples id as keywords. Example: [{:id 1
:name &quot;Bob} {:id 2 :name &quot;Jane&quot;}] -&gt; {:1 {:id :name &quot;example&quot;} :2
{:id 2 :name &quot;Jane }}</pre></div></div><div class="public anchor" id="var-tuple-vec-.3Eid-tuple"><h3>tuple-vec-&gt;id-tuple</h3><div class="usage"><code>(tuple-vec-&gt;id-tuple tuple-vec)</code></div><div class="doc"><pre class="plaintext">&quot;Vector of truples to tuples of id&apos;s&quot;; transforms a vector of
tuples into a map with the tuples id as keywords. Example: [{:id 1
:name &quot;Bob} {:id 2 :name &quot;Jane&quot;}] -&gt; {:1 {:id :name &quot;example&quot;} :2
{:id 2 :name &quot;Jane }}</pre></div></div><div class="public anchor" id="var-tuple-vec-.3Ekeyword-tuple"><h3>tuple-vec-&gt;keyword-tuple</h3><div class="usage"><code>(tuple-vec-&gt;keyword-tuple tuple-vec index-key)</code></div><div class="doc"><pre class="plaintext">&quot;Vector of truples to tuples of id&apos;s&quot;; transforms a vector of
tuples into a map with the tuples id as keywords. Example: [{:id 1
:name &quot;Bob} {:id 2 :name &quot;Jane&quot;}] -&gt; {:1 {:id :name &quot;example&quot;} :2
{:id 2 :name &quot;Jane }}</pre></div></div><div class="public anchor" id="var-unsubscribe-item-from-user"><h3>unsubscribe-item-from-user</h3><div class="usage"><code>(unsubscribe-item-from-user users service-name item email)</code></div><div class="doc"><pre class="plaintext">Unsubscribe item from user
</pre></div></div><div class="public anchor" id="var-unsubscribe-user-from-item"><h3>unsubscribe-user-from-item</h3><div class="usage"><code>(unsubscribe-user-from-item services service-name item uid)</code></div><div class="doc"><pre class="plaintext">Unsubscribe user from item
</pre></div></div><div class="public anchor" id="var-user.21"><h3>user!</h3><div class="usage"><code>(user! {:keys [:servcies :users], :as data} service-name suid email name)</code></div><div class="doc"><pre class="plaintext">
</pre></div></div><div class="public anchor" id="var-user-notifed"><h3>user-notifed</h3><div class="usage"><code>(user-notifed {:keys [:users], :as data} email events)</code></div><div class="doc"><pre class="plaintext">When a client have read a notification 
</pre></div></div><div class="public anchor" id="var-users-coll"><h3>users-coll</h3><div class="usage"><code>(users-coll data)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-users-nth"><h3>users-nth</h3><div class="usage"><code>(users-nth {:keys [:users], :as data} id)</code></div><div class="doc"><pre class="plaintext">Return user with id
</pre></div></div></div></body></html>